---
title: 数据结构之深入理解数组
categories:  # 这里写的分类会自动汇集到 categories 页面上，分类可以多级
- 数据结构 
tags:   # 这里写的标签会自动汇集到 tags 页面上
- 数据结构
- 数组
---

### 什么是数组
数组，是有序的元素序列。若将有限个类型相同的变量的集合命名，那么这个名称为数组名。
组成数组的各个变量称为数组的分量，也称为数组的元素，有时也称为下标变量。
用于区分数组的各个元素的数字编号称为下标。数组是在程序设计中，为了处理方便， 把具有相同类型的若干元素按无序的形式组织起来的一种形式。
以上是度娘的解释。
简单来说数组就是数量固定且类型相同的元素集合。


### 数组特点与内存结构
为了方便理解，这里使用 cpp 代码来做试验，因为可以直接打印内存地址。
``` bash
int a[5] = {111,222,333,444,555};
```
这里得<font color=#0099ff>int a[5]</font> 意思是，在栈中开辟 5个连续得内存空间，每个空间4字节，因为我们定义得数组类型是int。
``` bash
cout << a << endl;
cout << (a+1) << endl;
cout << (a+2) << endl;
cout << (a+3) << endl;
cout << (a+4) << endl;

//输出结果为
//0x61ff0c
//0x61ff10
//0x61ff14
//0x61ff18
//0x61ff1c
```
上面代码打印了 数组<font color=#0099ff>a</font>中得每个元素得内存地址。
每个人得电脑打印出得内存地址有可能不一样，只需要注意这个16进制串中得后几位，<font color=#0099ff>从0c开始 10 14 18 到1c结束。</font>
从这里可以看出，数组得内存空间是连续得。这也是为什么数组可以直接通过下标来获取数据，再举个栗子。
``` bash
//使用下标 取数据
cout << a[0] << endl;
cout << a[1] << endl;
cout << a[2] << endl;
cout << a[3] << endl;
cout << a[4] << endl;

//使用内存地址 取数据
cout << (*a) << endl;
cout << *(a+1) << endl;
cout << *(a+2) << endl;
cout << *(a+3) << endl;
cout << *(a+4) << endl;

//输出结果
//111
//222
//333
//444
//555
```
上面得栗子更加得体现出了，数组得特性。
其中<font color=#0099ff>*(xx)</font>表示，将指针指向括号中得表达式所表达得内存地址，输出结果和直接使用下标一样，因为这两者是等价得，下面会详细说明。


### 数组与指针的关系
数组和指针是两种不同的类型，数组具有确定数量的元素，而指针只是一个标量值。数组可以在某些情况下转换为指针，当数组名在表达式中使用时，
编译器会把数组名转换为一个指针常量，默认表示数组中的第一个元素的内存地址，类型就是数组元素的地址类型，如
``` bash
int a[5] = {111, 222, 333, 444, 555};
```
数组名a若出现在表达式中，如
``` bash
int *p = a;
```
那么它就转换为第一个元素的地址，等价于
``` bash
int *p = &a[0];
```
再举个栗子
``` bash
int aa[2][5] = { {1,2,3,4,5}, {6,7,8,9,10} };
```
数组名aa若出现在表达式中，如
``` bash
int (*p)[5] = aa;
```
那么它就转换为第一个元素的地址，等价于
``` bash
int (*p)[5] = &aa[0];
```

### 数组与指针的下标引用
``` bash
int a[5]={0,1,2,3,4};
```
如果想取出上面数组第4个元素，我们会这样写 <font color=#0099ff>a[3]</font>，用下标来访问数组<font color=#0099ff>a</font>中的第4个元素，那么下标的本质是什么？
本质就是这样的一个表达式：<font color=#0099ff>*(a+3)</font>，当然表达式中必须含有有效的数组名或指针变量。
其实<font color=#0099ff>a[3]</font>和<font color=#0099ff>3[a]</font>是等价的，因为他们会被编译器翻译成相同的表达式，结果是相同的，最多时顺序不同而已，都是访问的数组<font color=#0099ff>a</font>中的第4个元素。
指针当然也能用下标的形式了，
如
``` bash
int *p=a;
```
那么<font color=#0099ff>p[3]</font>就是<font color=#0099ff>*(p+3)</font>，<font color=#0099ff>等同于3[p]</font>，同样访问数组a中的第4个元素。
如
``` bash
int aa[2][5] = { {0,1,2,3,4}, {5,6,7,8,9} };
cout << 1[aa][2] << endl;
cout << *(*(1+aa)+2) << endl;
cout << aa[1][2] << endl;
```
以上三个表达式 都是相等的，输出的内容也是一样的。

### 总结
数组就是数量固定且类型相同的元素集合。
数组的的内存空间是连续的，有规律的，所以可以直接使用下表访问相应的元素。
数组的查询是非常快的，因为它可以直接根据下标计算出内存地址，不用像 链表 一样，每次查询都需要遍历。
数组的插入和删除是比较慢的，因为每次插入或删除一个元素的时候，都需要重新维护序号指针。

作者：choice
链接：http://onlinetool.com.cn/2018/07/16/dataStructure-array/#more
來源：原创
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。